---
import Layout from '@layouts/lab.astro';
import LabCard from '@components/LabCard.astro';
import {getCollection} from 'astro:content';
import {compareDesc} from 'date-fns';

const allPosts = (await getCollection('lab')).sort((a, b) => compareDesc(new Date(a.data.date), new Date(b.data.date)));
const publicPosts = allPosts.filter((post) => post.data.draft !== true);
const posts = process.env.NODE_ENV === 'development' ? allPosts : publicPosts;
---

<Layout title="COLORMONO'S LAB" description="Mariano Rivas's experiments.">
  {posts.map((post) => <LabCard item={post} class="absolute" />)}
</Layout>
